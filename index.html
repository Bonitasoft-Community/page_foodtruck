<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>Food Truck</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="pageResource?page=custompage_foodtruck&location=style/animate.css" />
    <link rel="stylesheet" href="pageResource?page=custompage_foodtruck&location=style/bootstrap.min.css">
	<link rel="stylesheet" href="pageResource?page=custompage_foodtruck&location=style/main.css">
	<link rel="stylesheet" href="pageResource?page=custompage_foodtruck&location=style/style.css">

	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript" src="https://www.google.com/uds/?file=visualization&amp;v=1&amp;hl=fr&amp;packages=corechart&amp;async=2"></script>
	<link type="text/css" href="https://www.google.com/uds/api/visualization/1.0/ff67c3772da186a412ae3231c32409e9/ui+fr.css" rel="stylesheet">
	<script type="text/javascript" src="https://www.google.com/uds/api/visualization/1.0/ff67c3772da186a412ae3231c32409e9/format+fr,default+fr,ui+fr,corechart+fr.I.js"></script>
	<link href="https://ajax.googleapis.com/ajax/static/modules/gviz/1.0/core/tooltip.css" rel="stylesheet" type="text/css">


</head>
<body ng-app="foodtruckmonitor">




<div class="bs-component"  ng-controller="FoodTruckControler as ctrl">

	
	<center>
		<table>
			<tr>
				<td><h1>Food Truck</h1><a href="" ng-click="ctrl.showhistory( ! ctrl.isshowhistory )">V2.0</a></td>
				<td rowspan="2"><img src="pageResource?page=custompage_foodtruck&location=img/foodtruck.jpg" width="150" heigth="150" /></td>
			</tr>
			<tr><td>
				<div id="showHistory" ng-show="ctrl.isshowhistory" style="border-width:2px;border-style:ridge;border-color:blue">
				1.0 First version<br>
				1.1 Ready for 7.5 + BonitaCommunity login
				1.2 Bug fix
				1.3 Look and feel
				2.0 Use BonitaStore API, RestApiExtension download
				</td>
			</tr>
			</div>
		</table>
	</center>
	

	<ul class="nav nav-tabs"  ng-class="{'nav-stacked': vertical, 'nav-justified': justified}" style="border-bottom: 1px solid #c2c2c2;">
		<li ng-class="{active: active, disabled: false}" id="form-tab" heading="custompage" active="true" title="Custom page" select="ctrl.navbaractiv == 'custompage'" class="{{ctrl.getNavClass('custompage')}}" style="{{ctrl.getNavStyle('custompage')}}">
			  <a ng-click="ctrl.navbaractiv = 'custompage';"   class="ng-binding">Custom Pages</a>
		</li>
		<li ng-class="{active: active, disabled: false}" id="form-tab" heading="restapiextension" active="true" title="Rest API Context" select="ctrl.navbaractiv == 'restapiextension'" class="{{ctrl.getNavClass('restapiextension')}}" style="{{ctrl.getNavStyle('restapiextension')}}">
			  <a  ng-click="ctrl.navbaractiv='restapiextension'"  class="ng-binding">Rest API Extension</a>
		</li>
		<li ng-class="{active: active, disabled: false}" id="form-tab" heading="parameters" active="true" title="Git Login" select="ctrl.navbaractiv == 'parameters'" class="{{ctrl.getNavClass('parameters')}}" style="{{ctrl.getNavStyle('parameters')}}">
			  <a  ng-click="ctrl.navbaractiv='parameters'" class="ng-binding">Parameters</a>
		</li>
		<li ng-class="{active: active, disabled: false}" id="form-tab" heading="howtopublish" active="true" title="How to publish an artifact to be visible in FoodTruck" select="ctrl.navbaractiv == 'howtopublish'" class="{{ctrl.getNavClass('howtopublish')}}" style="{{ctrl.getNavStyle('differentiel')}}">
			  <a  ng-click="ctrl.navbaractiv='howtopublish'" class="ng-binding">How to Publish</a>
		</li>
	</ul>
	
	<!--   -------------------------------------------------------------------------- -->
	<!--                                                                              -->
	<!--  Custom page                                                                 -->
	<!--                                                                              -->
	<!-- --------------------------------------------------------------------------   -->
	
	<div class="col-lg-12" ng-if="ctrl.navbaractiv == 'custompage'">
		
		<div class="explanation">
		Custom page, installed or / and available on FoodTruck.
		</div>
		<input type="checkbox" ng-model="ctrl.custompage.showProvided">Show provided Page

		<span class="Loading" ng-show="ctrl.loading"></span>
		<span class="label label-info">{{ctrl.custompage.status}}</span>
		<div ng-bind-html="ctrl.getListEvents(ctrl.custompage.listevents )"></div>


		<table>
			<tr>
			 <td style="padding: 10px 10px 10px 10px;vertical-align:top;background-color: #e6e6e6;"><button ng-click="ctrl.getlistartifacts( 'CUSTOMPAGE', 'ALL')" class="btn btn-info ">All</button></td>
			 <td style="padding: 10px 10px 10px 10px;vertical-align:top;background-color: #e6e6e6;"><button ng-click="ctrl.getlistartifacts( 'CUSTOMPAGE', 'MYPLATFORM')" class="btn btn-primary ">My platform</button></td>
			 <td style="padding: 10px 10px 10px 10px;vertical-align:top;background-color: #e6e6e6;"><button ng-click="ctrl.getlistartifacts( 'CUSTOMPAGE', 'WHATSUPDATE')" class="btn btn-warning ">Update ?</button></td>
			 <td style="padding: 10px 10px 10px 10px;vertical-align:top;background-color: #e6e6e6;"><button ng-click="ctrl.getlistartifacts( 'CUSTOMPAGE', 'WHATSNEWS')" class="btn btn-success ">New ? </button>
			    <br>
				<!--  Search:<input type="text" ng-model="ctrl.custompage.search">-->
				</td>
			</tr>
		</table>
		<p>
		<p>
				
		<div ng-repeat="custompageinfo in ctrl.getDisplayListPages() track by $index">
		
			<div class="col-lg-4">

				<table style="border: solid 1px;width:500px;height:200px;margin:0px 10px 10px 10px;box-shadow: 1px 1px 12px #555;">
					<tr style="background:#f5f5f5;text-align:center;height:10px">
						<td >Name</td>
						<td>Description</td>
						<td>Profile</td>
					</tr>
					<tr>
						<td >
							<table>
							<tr>
								<td style="width:150px;height:150px">
									<img ng-if="custompageinfo.urllogo" ng-src="{{custompageinfo.urllogo}}" style="max-width: 150px;max-height:150px; height: auto;"  />
								</td>
							</tr>
								<td>
									<a href="" title="{{custompageinfo.name}}">{{custompageinfo.displayname}}</a>
								</td>
							</tr>
							</table>
					    </td>
						<td>
							{{custompageinfo.version}} {{custompageinfo.releasedate}}<p>
							<span style="font-size: smaller;">
							{{custompageinfo.description}}
							</span>
							<p>
							<span style="font: italic bold 12px/30px Georgia, serif;" ng-if="custompageinfo.showdownload">{{custompageinfo.nbdownloads}}&nbsp;Downloads</span>
						</td>
						<td>
							<div ng-show="custompageinfo.isAllowAddProfile && ctrl.generalAllowAddProfile">
						 	 	<table>
								<tr>
									<td>
									<div ng-repeat="profileinfo in custompageinfo.listprofiles track by $index">
										<label class="label label-info btn-xs">
											{{profileinfo.name}} 
											<a  ng-click="ctrl.removeartifactfromprofile( custompageinfo, profileinfo )">
												<span class="glyphicon glyphicon-remove" aria-hidden="true" style="color: red;"></span>
											</a>
										</label>
									</div>
									</td>
								 </tr>
								 <tr ng-show="ctrl.getlistprofiletoadd( custompageinfo ).length > 0">
								 	<td colspan="2">
									Add in profile: 
									<select ng-model="custompageinfo.addinprofileid">
										<option ng-repeat="profileinfo in ctrl.getlistprofiletoadd( custompageinfo )"  value="{{profileinfo.id}}">{{profileinfo.name}}</option>
									</select>
									<button type="button" class="btn btn-xs btn-success" ng-click="ctrl.addartifactinprofile( custompageinfo )">Add</button>
									</td>
								</tr>
								<tr><td colspan="2">{{custompageinfo.statusinfo}}</td></tr>
								
								</table>
							</div>
						</td>
					</tr>
					
					<tr>
						<td>
							<button ng-show="custompageinfo.status=='INDOWNLOAD'" class="btn btn-warning btn-xs" style="width:100%">Dowload...</button>
							<button ng-show="custompageinfo.status=='LOCAL'" class="btn btnl-primary btn-xs" style="width:100%">Local</button>
						    <button ng-show="custompageinfo.status=='NEW'" class="btn btn-info btn-xs" style="width:100%" ng-click="ctrl.downloadartifact(custompageinfo)">Available</button>
						    <button ng-show="custompageinfo.status=='OK'" class="btn btn-success btn-xs" style="width:100%" >Up to date</button>
						    <button ng-show="custompageinfo.status=='NOTAVAILABLE'" class="btn btn-primary btn-xs" style="width:100%" >Not available</button>
						    <button ng-show="custompageinfo.status=='TOUPDATE'" class="btn btn-danger btn-xs" style="width:100%" ng-click="ctrl.downloadartifact(custompageinfo)">New version</button>
						  
						    <div  ng-show="custompageinfo.status=='TOUPDATE'">
						  		<div ng-show="! custompageinfo.showwhatsnew">
						  			<button ng-click="custompageinfo.showwhatsnew = ! custompageinfo.showwhatsnew"><span class="glyphicon glyphicon-chevron-left"></span></button>
						  		</div>
						  		<div ng-show="custompageinfo.showwhatsnew">
						  			<button ng-click="custompageinfo.showwhatsnew = ! custompageinfo.showwhatsnew"><span class="glyphicon glyphicon-chevron-right"></span></button>
						  			{{custompageinfo.whatsnews}}
						  		</div>
						 	 </div>		
						</td>
						<td  style="text-align:center"> 
						 	<div ng-if="custompageinfo.isprovided"><label class="label label-default">Provided</label></div>
						</td>
					</tr>
				</table>
			</div>
		</div> <!--  end div repeat  -->
		
		<!-- 
		<p>
		<p>
		<div class="col-lg-12">{{ctrl.getDisplayListPages()}}</div>
		 -->
	</div>
		
		<!--   -------------------------------------------------------------------------- -->
	<!--                                                                              -->
	<!--  Rest Extension                                                                 -->
	<!--                                                                              -->
	<!-- --------------------------------------------------------------------------   -->
	<div class="col-lg-12" ng-if="ctrl.navbaractiv == 'restapiextension'">
		
		<div class="explanation">
		RestAPIExtension, installed or / and available on FoodTruck.
		</div>
		<input type="checkbox" ng-model="ctrl.custompage.showProvided">Show provided RestAPIExtension

		<span class="Loading" ng-show="ctrl.loading"></span>
		<span class="label label-info">{{ctrl.custompage.status}}</span>
		<div ng-bind-html="ctrl.getListEvents(ctrl.custompage.listevents )"></div>


		<table>
			<tr>
			 <td style="padding: 10px 10px 10px 10px;vertical-align:top;background-color: #e6e6e6;"><button ng-click="ctrl.getlistartifacts( 'RESTAPI', 'ALL')" class="btn btn-info ">All</button></td>
			 <td style="padding: 10px 10px 10px 10px;vertical-align:top;background-color: #e6e6e6;"><button ng-click="ctrl.getlistartifacts( 'RESTAPI', 'MYPLATFORM')" class="btn btn-primary ">My platform</button></td>
			 <td style="padding: 10px 10px 10px 10px;vertical-align:top;background-color: #e6e6e6;"><button ng-click="ctrl.getlistartifacts( 'RESTAPI', 'WHATSUPDATE')" class="btn btn-warning ">Update ?</button></td>
			 <td style="padding: 10px 10px 10px 10px;vertical-align:top;background-color: #e6e6e6;"><button ng-click="ctrl.getlistartifacts( 'RESTAPI', 'WHATSNEWS')" class="btn btn-success ">New ? </button>
			    <br>
				<!--  Search:<input type="text" ng-model="ctrl.custompage.search">-->
				</td>
			</tr>
		</table>
		<p>
		<p>
				
		<div ng-repeat="custompageinfo in ctrl.getDisplayListRest() track by $index">
		
			<div class="col-lg-4">

				<table style="border: solid 1px;width:500px;height:200px;margin:0px 10px 10px 10px;box-shadow: 1px 1px 12px #555;">
					<tr style="background:#f5f5f5;text-align:center;height:10px">
						<td >Name</td>
						<td>Description</td>
						<td>Profile</td>
					</tr>
					<tr>
						<td>
							<table style="width:100%">
							<tr>
							<td style="width:150px;height:150px"> 
								<img ng-src="{{custompageinfo.urllogo}}" style="max-width: 150px;max-height:150px; height: auto;"  /></td><td><a href="" title="{{custompageinfo.name}}">{{custompageinfo.displayname}}</a></td></tr>
							<tr><td colspan="2">
							<button ng-show="custompageinfo.status=='INDOWNLOAD'" class="btn btn-warning btn-xs" style="width:100%">Dowload...</button>
							<button ng-show="custompageinfo.status=='LOCAL'" class="btn btnl-primary btn-xs" style="width:100%">Local</button>
						    <button ng-show="custompageinfo.status=='NEW'" class="btn btn-info btn-xs" style="width:100%" ng-click="ctrl.downloadartifact(custompageinfo)">Available</button>
						    <button ng-show="custompageinfo.status=='OK'" class="btn btn-success btn-xs" style="width:100%" >Up to date</button>
						    <button ng-show="custompageinfo.status=='NOTAVAILABLE'" class="btn btn-primary btn-xs" style="width:100%" >Not available</button>
						    <button ng-show="custompageinfo.status=='TOUPDATE'" class="btn btn-danger btn-xs" style="width:100%" ng-click="ctrl.downloadartifact(custompageinfo)">New version</button>
						  
						    <div  ng-show="custompageinfo.status=='TOUPDATE'">
						  		<div ng-show="! custompageinfo.showwhatsnew">
						  			<button ng-click="custompageinfo.showwhatsnew = ! custompageinfo.showwhatsnew"><span class="glyphicon glyphicon-chevron-left"></span></button>
						  		</div>
						  		<div ng-show="custompageinfo.showwhatsnew">
						  			<button ng-click="custompageinfo.showwhatsnew = ! custompageinfo.showwhatsnew"><span class="glyphicon glyphicon-chevron-right"></span></button>
						  			{{custompageinfo.whatsnews}}
						  		</div>
						 	 </div>		
							</td>
							</tr>
							</table>
							
						</td>
						<td>{{custompageinfo.version}} {{custompageinfo.releasedate}}<p>
						<span style="font-size: smaller;">
						{{custompageinfo.description}}
						</span>
						<p>
						<span style="font: italic bold 12px/30px Georgia, serif;" ng-if="custompageinfo.showdownload">{{custompageinfo.nbdownloads}}&nbsp;Downloads</span>
						</td>
						<td>
						</td>
					</tr>
				</table>
			</div>
		</div> <!--  end div repeat  -->
				
	</div>
	<!--   -------------------------------------------------------------------------- -->
	<!--                                                                              -->
	<!--  Custom widget                                                                 -->
	<!--                                                                              -->
	<!-- --------------------------------------------------------------------------   -->
		
		<!-- 
		<div class="col-lg-12">
			<legend class="text-primary"><span class="glyphicon glyphicon-th"></span>Custom Widget</legend>
			<div class="panel panel-primary">
				<div class="explanation">
					Show the different custom widget available on the Food Truck, and download them.
				</div>

				<div ng-bind-html="ctrl.getListEvents(ctrl.customwidget.listevents )"></div>
			
				<button ng-click="ctrl.listcustomwidget()" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-refresh" aria-hidden="true"></span></button>
				<input type="checkbox" ng-model="ctrl.customwidget.showlocal">Local
				<input type="checkbox" ng-model="ctrl.customwidget.showfoodtruck">FoodTruck
				Search:<input type="text" ng-model="ctrl.customwidget.search"><button ng-click="ctrl.searchCustomWidget()" class="btn btn-info btn-xs">Search</button>
				
				<table class="table table-striped table-hover table-condensed">
					<tr> <th></th><th>Name</th><th>Description</th><th>Release</th><tr>
					<tbody ng-repeat="customwidgetinfo in ctrl.customwidget.list track by $index">
						<tr>
							<td>{{customwidgetinfo.icon}}</td>
							<td><a href="" info="{{customwidgetinfo.name}}">{{customwidgetinfo.displayname}}</a><br>
							  <div ng-show="customwidgetinfo.islocal">Local</div>
							  <button ng-show="customwidgetinfo.isnew" class="button button-info">Available</button>
							  <div ng-show="customwidgetinfo.isnew" class="label label-success">Up to date</div>
							  <button ng-show="customwidgetinfo.isnew" class="button button-danger">New version</div>
							  <div  ng-show="customwidgetinfo.isnew">
							  	<div ng-show="! customwidgetinfo.showwhatsnew"><button ng-click="customwidgetinfo.showwhatsnew = ! customwidgetinfo.showwhatsnew"><span class="glyphicon glyphicon-left"></span></button>
							  	</div>
							  	<div ng-show="customwidgetinfo.showwhatsnew"><button ng-click="customwidgetinfo.showwhatsnew = ! customwidgetinfo.showwhatsnew"><span class="glyphicon glyphicon-right"></span></button>
							  		{{customwidgetinfo.whatsnews}}
							  	</div>
							</div>							  	
							 </td>
							<td>{{customwidgetinfo.description}}</td>
							<td>{{customwidgetinfo.version}} {{customwidgetinfo.releasedate}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		 -->
	<!--   -------------------------------------------------------------------------- -->
	<!--                                                                              -->
	<!--  Parameters                                                                 -->
	<!--                                                                              -->
	<!-- --------------------------------------------------------------------------   -->
	

	<div class="col-lg-12" ng-if="ctrl.navbaractiv =='parameters'">

			</span>Github Login</legend>
			
			<div class="well">Leave it blank to use the defaut BonitaFoodTruck account</div><p>
			Login: <input  ng-model="ctrl.param.github.gitlogin" maxlength="30">						
			Password:<input type="password" ng-model="ctrl.param.github.gitpassword">
			<p><p> <button  class="btn btn-success" ng-click="ctrl.saveParameters()" ng-disabled="ctrl.saveinprogress">Set login</button>
			<div ng-bind-html="ctrl.getListEvents(ctrl.listevents )"></div>
						
			
						
	</div>
	
	<!--   -------------------------------------------------------------------------- -->
	<!--                                                                              -->
	<!--  Parameters                                                                 -->
	<!--                                                                              -->
	<!-- --------------------------------------------------------------------------   -->
	<div class="col-lg-12" ng-if="ctrl.navbaractiv =='howtopublish'">
					
		<h2>Want to see your page here ?</h2>
		
		Any artifact published in the Bonita Community https://github.com/Bonitasoft-Community is visible here. Just follow these steps:
		
		
		<h3>Publication</h3>
			Publish your artifact  (page, restapi extension) in the Bonita Github Community.
		<h3>Tag it</h3>
			Add a topic, "page", "restapiextension" on the project
		<h3>Release</h3>	
			Create a release in Github, and in the release, have a file "custompage_XXX.zip". This is the ressource information download by FoodTruck when the user clicks on "Download".
			How Foodtruck detect this is a new release? It compare the date of the release and the date of the installed artifact.
			
		<h3>Add an icon</h3>
			Put in your project a file name XXX.jpg, this is the logo of the image. For example, the FoodTruck image is "foodtruck.jpg" (attention, save the name in lower case).
			
		<h3>Description</h3>
			Put in the github root a page.properties, which contains the description.
				
		Example of page.properties 
		<div class="well">
		#The name must start with 'custompage_'<br>
		#Tue Sep 26 09:20:34 PDT 2017<br>
		displayName=FoodTruck<br>
		version=2.0<br>
		name=custompage_foodtruck<br>
		description=The Bonita Application Store. All applications available on the community are visible, and users can download them just by clicking on. For a subscription edition, it's possible to add the application immediately in a profile.<br>
		</div>
							
			
	</div>
						
	
</div> <!--  end div controler -->



<!-- Third party dependencies -->

<script src="pageResource?page=custompage_foodtruck&location=3rd-party/jquery.min.js"></script>

<script src="pageResource?page=custompage_foodtruck&location=3rd-party/angular.min.js"></script>

<script src="pageResource?page=custompage_foodtruck&location=3rd-party/angular-resource.min.js"></script>
<script src="pageResource?page=custompage_foodtruck&location=3rd-party/angular-cookies.min.js"></script>

<script src="pageResource?page=custompage_foodtruck&location=3rd-party/bootstrap/js/bootstrap.min.js"></script>
<script src="pageResource?page=custompage_foodtruck&location=3rd-party/angular-bootstrap-tpls.min.js"></script>
<script src="pageResource?page=custompage_foodtruck&location=3rd-party/angular-file-upload.js"></script>
<script src="pageResource?page=custompage_foodtruck&location=3rd-party/ng-google-chart.js"></script>
<script src="pageResource?page=custompage_foodtruck&location=3rd-party/angular-sanitize.min.js"></script> 


<!-- Application dependencies -->
<script src="pageResource?page=custompage_foodtruck&location=foodtruckmonitor.js"></script>

</body>
</html>